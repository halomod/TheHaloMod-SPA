// import deepFreeze from 'deep-freeze';
import generatedBackendConstants from '@/../generated/backend_constants.json';
import forms from '@/constants/forms.js';

/**
 * Note that these are generated by running `npm run setup` first.
 *
 * @typedef HMModel
 */
const BACKEND_CONSTANTS = generatedBackendConstants;
const FORM_OPTION_DEFAULTS = {};
const INITIAL_STATE = {};

Object.entries(forms).forEach((key, { core_params, model_key, params_key }) => {
  /* builds initial state for each subform */
  const items = [...(!core_params ? [] : core_params), model_key, params_key];
  const initial = {};
  items.forEach((item) => {
    initial[item] = BACKEND_CONSTANTS[item];
  });
  INITIAL_STATE[key] = initial;

  /* pulls option defaults from BACKEND_CONSTANTS */
  FORM_OPTION_DEFAULTS[key] = BACKEND_CONSTANTS[key];
});

/* cosmo is special */
FORM_OPTION_DEFAULTS.cosmo = {
  Planck13: {
    cosmo_params: BACKEND_CONSTANTS.cosmo_defaults.Planck13,
    z: 0.0,
    n: 0.9619,
    sigma_8: 0.8347,
  },
  Planck15: {
    cosmo_params: BACKEND_CONSTANTS.cosmo_defaults.Planck15,
    z: 0.0,
    n: 0.965,
    sigma_8: 0.802,
  },
  WMAP5: {
    cosmo_params: BACKEND_CONSTANTS.cosmo_defaults.WMAP5,
    z: 0.0,
    n: 0.962,
    sigma_8: 0.817,
  },
  WMAP7: {
    cosmo_params: BACKEND_CONSTANTS.cosmo_defaults.WMAP7,
    z: 0.0,
    n: 0.967,
    sigma_8: 0.81,
  },
  WMAP9: {
    cosmo_params: BACKEND_CONSTANTS.cosmo_defaults.WMAP9,
    z: 0.0,
    n: 0.9646,
    sigma_8: 0.817,
  },
};

console.log(INITIAL_STATE);
console.log(FORM_OPTION_DEFAULTS);

export { INITIAL_STATE, FORM_OPTION_DEFAULTS };
